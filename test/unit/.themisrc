call themis#option('exclude', 'test/README.md')

let s:dir = expand('<sfile>:p:h')
let s:sep = has('win32') ? '\' : '/'
let s:runtime_dir = join([s:dir, 'runtime'], s:sep)

execute 'set rtp+=' . s:runtime_dir

let s:helper = themis#helper('assert')
call themis#helper('command').with(s:helper)

function! WaitUntil(func, ...) abort
    let timeout = get(a:, 1, 1) " 1sec by default
    let total = 0
    while !a:func()
        sleep 100m
        let total += 0.1
        if total >= timeout
            " Note: v:true/v:false are not supported by themis.vim
            " https://github.com/thinca/vim-themis/pull/56
            return 0
        endif
    endwhile
    return 1
endfunction
